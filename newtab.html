<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SessionVault - New Tab</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* 시스템 테마에 따른 기본 배경 설정 (깜빡임 방지) */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            /* 깔끔한 라이트 테마 배경 */
            background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 100%) !important;
            color: #202124 !important;
            /* 초기 로딩 시 페이지 숨김 */
            visibility: hidden;
            min-height: 100vh;
            padding-top: 70px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* 다크모드에서 body 배경 */
        @media (prefers-color-scheme: dark) {
            body {
                background: #202124 !important;
                color: #e8eaed !important;
            }
        }

        /* 검색창 스타일 */
        .search-section {
            text-align: center;
            margin: 60px 0 40px 0;
        }

        .search-container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            border: none;
            border-radius: 24px;
            /* 시스템 테마에 따라 적절한 기본값 설정 */
            background: var(--theme-card-background, rgba(255, 255, 255, 0.95));
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 16px var(--theme-border, rgba(0, 0, 0, 0.1));
            outline: none;
            color: var(--theme-text, #202124);
            transition: all 0.3s ease;
        }

        /* 다크모드 기본값 */
        @media (prefers-color-scheme: dark) {
            .search-input {
                background: var(--theme-card-background, #3c4043);
                box-shadow: 0 4px 16px var(--theme-border, rgba(0, 0, 0, 0.3));
                color: var(--theme-text, #e8eaed);
            }
        }

        .search-input:focus {
            background: var(--theme-input-bg, var(--theme-card-background, rgba(255, 255, 255, 0.95)));
            box-shadow: 0 8px 32px var(--theme-border, rgba(0, 0, 0, 0.2));
        }

        .search-input::placeholder {
            color: var(--theme-input-placeholder, var(--theme-secondary-text, #666));
        }

        /* 다크모드에서 포커스 상태와 placeholder */
        @media (prefers-color-scheme: dark) {
            .search-input:focus {
                background: var(--theme-input-bg, var(--theme-card-background, #3c4043));
                box-shadow: 0 8px 32px var(--theme-border, rgba(0, 0, 0, 0.4));
            }

            .search-input::placeholder {
                color: var(--theme-input-placeholder, var(--theme-secondary-text, rgba(232, 234, 237, 0.7)));
            }
        }

        /* 검색 기록 드롭다운 */
        .search-history-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--theme-card-background, white);
            border-radius: 12px;
            box-shadow: 0 8px 32px var(--theme-border, rgba(0, 0, 0, 0.2));
            backdrop-filter: blur(10px);
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            margin-top: 8px;
            display: none;
            padding-right: 5px;
            text-align: left;
            border: 1px solid var(--theme-border, transparent);
        }

        /* 다크모드에서 드롭다운 */
        @media (prefers-color-scheme: dark) {
            .search-history-dropdown {
                background: var(--theme-card-background, #3c4043);
                box-shadow: 0 8px 32px var(--theme-border, rgba(0, 0, 0, 0.4));
                border: 1px solid var(--theme-border, rgba(95, 99, 104, 0.3));
            }
        }

        .search-history-dropdown::-webkit-scrollbar {
            width: 8px;
        }

        .search-history-dropdown::-webkit-scrollbar-track {
            background: transparent;
            margin: 12px 0;
        }

        .search-history-dropdown::-webkit-scrollbar-thumb {
            background: var(--theme-scrollbar-thumb, rgba(0, 0, 0, 0.2));
            border-radius: 10px;
        }

        .search-history-dropdown::-webkit-scrollbar-thumb:hover {
            background: var(--theme-scrollbar-thumb-hover, rgba(0, 0, 0, 0.3));
        }

        /* 다크모드에서 스크롤바 */
        @media (prefers-color-scheme: dark) {
            .search-history-dropdown::-webkit-scrollbar-thumb {
                background: var(--theme-scrollbar-thumb, rgba(232, 234, 237, 0.2));
            }

            .search-history-dropdown::-webkit-scrollbar-thumb:hover {
                background: var(--theme-scrollbar-thumb-hover, rgba(232, 234, 237, 0.3));
            }
        }

        .search-history-dropdown.visible {
            display: block;
        }

        .search-history-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--theme-border, #f0f0f0);
        }

        .search-history-item:hover,
        .search-history-item.highlighted {
            background-color: var(--theme-hover, #f8f9fa);
        }

        .search-history-item:last-child {
            border-bottom: none;
        }

        .search-history-icon {
            color: var(--theme-secondary-text, #666);
            font-size: 16px;
            flex-shrink: 0;
        }

        .search-history-text {
            flex: 1;
            font-size: 14px;
            color: var(--theme-text, #202124);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .search-history-delete {
            color: var(--theme-secondary-text, #999);
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .search-history-delete:hover {
            background-color: var(--theme-hover, #e9ecef);
            color: var(--theme-text, #666);
        }

        /* 다크모드에서 검색 기록 아이템들 */
        @media (prefers-color-scheme: dark) {
            .search-history-item:hover,
            .search-history-item.highlighted {
                background-color: var(--theme-hover, rgba(232, 234, 237, 0.1));
            }

            .search-history-icon {
                color: var(--theme-secondary-text, rgba(232, 234, 237, 0.7));
            }

            .search-history-text {
                color: var(--theme-text, #e8eaed);
            }

            .search-history-delete {
                color: var(--theme-secondary-text, rgba(232, 234, 237, 0.7));
            }

            .search-history-delete:hover {
                background-color: var(--theme-hover, rgba(232, 234, 237, 0.2));
                color: var(--theme-text, #e8eaed);
            }
        }

        .search-history-empty {
            padding: 20px;
            text-align: left;
            color: var(--theme-secondary-text, #666);
            font-size: 14px;
        }

        .search-suggestions-section {
            border-bottom: 1px solid var(--theme-border, #f0f0f0);
            margin-bottom: 8px;
        }

        .search-suggestions-header {
            padding: 8px 16px;
            font-size: 12px;
            color: var(--theme-secondary-text, #666);
            background-color: var(--theme-hover, #f8f9fa);
            font-weight: 500;
        }

        .search-suggestion-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--theme-border, #f0f0f0);
        }

        .search-suggestion-item:hover,
        .search-suggestion-item.highlighted {
            background-color: var(--theme-hover, #f8f9fa);
        }

        .search-suggestion-item:last-child {
            border-bottom: none;
        }

        .search-suggestion-icon {
            color: var(--theme-secondary-text, #666);
            font-size: 16px;
            flex-shrink: 0;
        }

        .search-suggestion-text {
            flex: 1;
            font-size: 14px;
            color: var(--theme-text, #202124);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* 다크모드에서 검색 제안들 */
        @media (prefers-color-scheme: dark) {
            .search-history-empty {
                color: var(--theme-secondary-text, rgba(232, 234, 237, 0.7));
            }

            .search-suggestions-section {
                border-bottom: 1px solid var(--theme-border, rgba(95, 99, 104, 0.3));
            }

            .search-suggestions-header {
                color: var(--theme-secondary-text, rgba(232, 234, 237, 0.7));
                background-color: var(--theme-hover, rgba(232, 234, 237, 0.1));
            }

            .search-suggestion-item {
                border-bottom: 1px solid var(--theme-border, rgba(95, 99, 104, 0.3));
            }

            .search-suggestion-item:hover,
            .search-suggestion-item.highlighted {
                background-color: var(--theme-hover, rgba(232, 234, 237, 0.1));
            }

            .search-suggestion-icon {
                color: var(--theme-secondary-text, rgba(232, 234, 237, 0.7));
            }

            .search-suggestion-text {
                color: var(--theme-text, #e8eaed);
            }
        }

        .search-suggestion-text .highlight {
            font-weight: 600;
        }

        /* Google 상단 헤더 스타일 */
        .google-header {
            position: fixed;
            top: 0;
            right: 0;
            left: 0;
            z-index: 1000;
            padding: 15px 20px;
            background: transparent;
        }

        .google-header-right {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 8px;
        }

        .header-link {
            color: var(--theme-text, rgba(255, 255, 255, 0.9));
            text-decoration: none;
            font-size: 13px;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-weight: 400;
        }

        .header-link:hover {
            background: var(--theme-hover, rgba(255, 255, 255, 0.1));
            color: var(--theme-text, white);
            text-decoration: underline;
        }

        .header-icon-btn {
            background: none;
            border: none;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .header-icon-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .header-icon-btn svg {
            opacity: 0.9;
            transition: opacity 0.2s ease;
        }

        .header-icon-btn:hover svg {
            opacity: 1;
        }

        .header-icon-btn svg path {
            fill: rgba(255, 255, 255, 0.9);
        }

        .header-profile-btn {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .header-profile-btn:hover {
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);
        }

        /* 아이콘 테마별 표시 규칙 */
        .google-apps-icon-light,
        .flask-icon-light {
            display: none;
        }

        .google-apps-icon-dark,
        .flask-icon-dark {
            display: block;
        }

        /* 라이트모드에서 아이콘 전환 */
        @media (prefers-color-scheme: light) {
            .google-apps-icon-dark,
            .flask-icon-dark {
                display: none;
            }

            .google-apps-icon-light,
            .flask-icon-light {
                display: block;
            }
        }

        .profile-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #ea4335;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 500;
        }

        /* Google 앱 드롭다운 스타일 */
        .google-apps-container {
            position: relative;
        }

        .google-apps-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 10px;
            background: var(--theme-card-background, #303134);
            border-radius: 20px;
            box-shadow: 0 8px 32px var(--theme-border, rgba(0, 0, 0, 0.3));
            width: 400px;
            max-height: 600px;
            overflow-y: auto;
            z-index: 1001;
            display: none;
            padding: 20px;
            border: 1px solid var(--theme-border, transparent);
        }

        .google-apps-dropdown.visible {
            display: block;
        }

        .google-apps-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .google-app-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            border-radius: 10px;
            text-decoration: none;
            color: var(--theme-text, #e8eaed);
            transition: all 0.2s ease;
            font-size: 13px;
        }

        .google-app-item:hover {
            background: var(--theme-hover, rgba(255, 255, 255, 0.1));
        }

        .google-app-item img {
            width: 48px;
            height: 48px;
            margin-bottom: 8px;
            border-radius: 8px;
        }

        .google-app-item span {
            text-align: center;
            word-break: break-word;
            line-height: 1.2;
        }

        .google-apps-footer {
            border-top: 1px solid var(--theme-border, #5f6368);
            padding-top: 15px;
            text-align: center;
        }

        .more-google-apps {
            color: var(--theme-text, #8ab4f8);
            text-decoration: none;
            font-size: 13px;
            padding: 8px 16px;
            border: 1px solid var(--theme-border, #5f6368);
            border-radius: 20px;
            transition: all 0.2s ease;
        }

        .more-google-apps:hover {
            background: var(--theme-hover, rgba(255, 255, 255, 0.1));
            border-color: var(--theme-text, #8ab4f8);
        }

        .google-apps-dropdown::-webkit-scrollbar {
            width: 8px;
        }

        .google-apps-dropdown::-webkit-scrollbar-track {
            background: transparent;
            border-radius: 10px;
            margin: 20px 0;
        }

        .google-apps-dropdown::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .google-apps-dropdown::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Gemini 실선과 특별 섹션 */
        .google-apps-divider {
            border-top: 1px solid #5f6368;
            margin: 20px 0 15px 0;
        }

        .google-apps-special-section {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .google-app-special {
            position: relative;
            background: rgba(255, 255, 255, 0.05) !important;
            border: 1px solid #5f6368;
        }

        .google-app-special:hover {
            background: rgba(255, 255, 255, 0.1) !important;
        }

        .new-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #8ab4f8;
            color: #1a1a1a;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 500;
        }

        /* Gemini 혼자 중간에 배치 */
        .gemini-solo-container {
            grid-column: 1 / -1;
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }

        /* 바로가기 사이트 스타일 */
        .shortcuts-section {
            margin: 40px 0;
        }

        .shortcuts-container {
            max-width: 90vw;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 2vw;
            padding: 0 2vw;
        }

        .shortcut-item {
            background: var(--theme-card-background, rgba(255, 255, 255, 0.9));
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            text-decoration: none;
            color: var(--theme-text, #333);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 16px var(--theme-border, rgba(0, 0, 0, 0.1));
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            border: 1px solid var(--theme-border, transparent);
        }

        .shortcut-item:hover {
            background: var(--theme-hover, white);
            box-shadow: 0 8px 32px var(--theme-border, rgba(0, 0, 0, 0.2));
            transform: translateY(-2px);
        }

        .shortcut-icon {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            background: var(--theme-icon-background, #f0f0f0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .shortcut-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--theme-text, #444);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }

        .container {
            max-width: 95vw;
            margin: 0 auto;
            padding: 40px 2vw;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: var(--theme-text, white);
            font-size: 2.5em;
            font-weight: 300;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px var(--theme-border, rgba(0, 0, 0, 0.3));
        }

        .header p {
            color: var(--theme-secondary-text, rgba(255, 255, 255, 0.8));
            font-size: 1.1em;
            text-shadow: 0 1px 2px var(--theme-border, rgba(0, 0, 0, 0.3));
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2vw;
            align-items: start;
            width: 100%;
        }

        .section {
            background: var(--theme-card-background, white);
            border-radius: 12px;
            padding: 2vw;
            box-shadow: 0 8px 32px var(--theme-border, rgba(0, 0, 0, 0.1));
            backdrop-filter: blur(10px);
            height: fit-content;
            min-height: 60vh;
            width: 100%;
            max-width: none;
            overflow: hidden;
            border: 1px solid var(--theme-border, transparent);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section h2 {
            color: var(--theme-text, #333);
            font-size: 1.4em;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .clear-all-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .clear-all-btn:hover {
            background: #c82333;
        }

        .clear-all-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .session-list {
            height: 52vh;
            overflow-y: auto;
            padding-right: 5px;
            width: 100%;
        }

        .session-list::-webkit-scrollbar {
            width: 6px;
        }

        .session-list::-webkit-scrollbar-track {
            background: var(--theme-hover, #f1f1f1);
            border-radius: 3px;
        }

        .session-list::-webkit-scrollbar-thumb {
            background: var(--theme-border, #c1c1c1);
            border-radius: 3px;
        }

        .session-list::-webkit-scrollbar-thumb:hover {
            background: var(--theme-secondary-text, #a1a1a1);
        }

        .session-item {
            border: 1px solid var(--theme-border, #e0e0e0);
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            width: 100%;
            background: var(--theme-card-background, white);
        }

        .session-item:hover {
            background: var(--theme-hover, #f8f9fa);
            box-shadow: 0 2px 8px var(--theme-border, rgba(0,0,0,0.1));
        }

        .session-header {
            padding: 15px;
            /* background: var(--theme-hover, #f8f9fa); */
            border-bottom: 1px solid var(--theme-border, #e0e0e0);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .session-header-left {
            flex: 1;
        }

        .session-header-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .delete-session-btn {
          background: none;
          border: none;
          font-size: 14px;
          cursor: pointer;
          padding: 4px;
          border-radius: 4px;
          transition: background-color 0.2s;
          flex-shrink: 0;
        }

        .delete-session-btn:hover {
          background: var(--theme-hover, #ffebee);
        }

        .session-title {
            font-weight: 500;
            font-size: 14px;
            color: var(--theme-text, #333);
        }

        .session-time {
            font-size: 12px;
            color: var(--theme-secondary-text, #666);
        }

        .session-info {
            font-size: 12px;
            color: var(--theme-secondary-text, #666);
            margin-top: 5px;
        }

        .session-content {
            padding: 15px;
            background: var(--theme-card-background, white);
            display: none;
        }

        .session-content.expanded {
            display: block;
        }

        .tabs-groups-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1vw;
            width: 100%;
        }

        .tabs-section, .groups-section {
            border: 1px solid var(--theme-border, #e0e0e0);
            border-radius: 6px;
            padding: 1vw;
            background: var(--theme-hover, #fafafa);
            min-width: 0;
            overflow: hidden;
            width: 100%;
        }

        .tabs-section h4, .groups-section h4 {
            font-size: 13px;
            color: var(--theme-text, #555);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tab-item, .group-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            padding: 6px 8px;
            border-radius: 4px;
            margin-bottom: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            width: 100%;
            min-width: 0;
        }

        .tab-item:hover, .group-item:hover {
            background: var(--theme-hover, #e3f2fd);
        }

        .tab-favicon {
            width: 16px;
            height: 16px;
            border-radius: 2px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .tab-title {
            font-size: 12px;
            color: var(--theme-text, #333);
            white-space: normal;
            word-break: break-word;
            line-height: 1.3;
            flex: 1;
            min-width: 0;
        }

        .group-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .group-title {
            font-size: 12px;
            color: var(--theme-text, #333);
            white-space: normal;
            word-break: break-word;
            line-height: 1.3;
            flex: 1;
            min-width: 0;
        }

        .group-count {
            font-size: 11px;
            color: #666;
            background: #e0e0e0;
            padding: 2px 6px;
            border-radius: 10px;
        }

        /* 닫힌 세션 아이템 스타일 */
        .closed-tab-item, .closed-group-item {
            display: block;
            margin-bottom: 8px;
            border: 1px solid var(--theme-border, #e0e0e0);
            border-radius: 8px;
            background: var(--theme-card-background, white);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .closed-tab-item:hover, .closed-group-item:hover {
            background: var(--theme-hover, #f8f9fa);
            /* border-color: #007bff; */
            /* transform: translateY(-1px); */
            box-shadow: 0 2px 8px var(--theme-border, rgba(0,0,0,0.1));
        }

        .closed-item-content {
            display: flex;
            align-items: center;
            padding: 12px;
            gap: 12px;
        }

        .closed-item-icon {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .closed-item-icon .tab-favicon {
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }

        .closed-item-icon .group-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }

        .closed-item-info {
            flex: 1;
            min-width: 0;
        }

        .closed-item-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--theme-text, #333);
            white-space: normal;
            word-break: break-word;
            line-height: 1.3;
            margin-bottom: 2px;
        }

        .closed-item-detail {
            font-size: 12px;
            color: var(--theme-secondary-text, #666);
        }

        .delete-closed-btn {
            background: none;
            border: none;
            font-size: 14px;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: background-color 0.2s;
            flex-shrink: 0;
        }

        .delete-closed-btn:hover {
            background: var(--theme-hover, #ffebee);
        }

        /* 그룹 컨테이너 스타일 */
        .closed-group-container {
            display: block;
            margin-bottom: 8px;
            border: 1px solid var(--theme-border, #e0e0e0);
            border-radius: 8px;
            background: var(--theme-card-background, white);
            transition: all 0.2s ease;
            overflow: hidden;
        }

        .closed-group-container:hover {
            border-color: #007bff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .closed-group-container.expanded {
            border-color: #007bff;
        }

        .closed-group-header {
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .closed-group-header:hover {
            background: #f8f9fa;
        }

        .closed-group-header-content {
            display: flex;
            align-items: center;
            padding: 12px;
            gap: 12px;
        }

        .closed-group-icon {
            position: relative;
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .closed-group-icon .group-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            position: absolute;
        }

        .closed-group-icon .group-folder-icon {
            font-size: 16px;
            position: relative;
            z-index: 1;
            opacity: 0.8;
        }

        .closed-group-info {
            flex: 1;
            min-width: 0;
            cursor: pointer;
            border-radius: 4px;
            padding: 2px 4px;
            transition: background-color 0.2s;
        }

        .closed-group-info:hover {
            background-color: #e3f2fd;
        }

        .closed-group-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }

        .closed-group-detail {
            font-size: 12px;
            color: #666;
        }

        .closed-group-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .expand-arrow {
            font-size: 12px;
            color: #666;
            transition: transform 0.2s;
            user-select: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
        }

        .expand-arrow:hover {
            background-color: #f0f0f0;
            color: #333;
        }

        .closed-group-tabs {
            border-top: 1px solid #f0f0f0;
            background: #fafafa;
            padding: 8px;
        }

        .closed-group-tab-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            border-radius: 4px;
            margin-bottom: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
            background: white;
            border: 1px solid #e8e8e8;
        }

        .closed-group-tab-item:hover {
            background: #e3f2fd;
            border-color: #2196f3;
        }

        .closed-group-tab-item:last-child {
            margin-bottom: 0;
        }

        .closed-group-tab-item .tab-favicon {
            width: 16px;
            height: 16px;
            border-radius: 2px;
            flex-shrink: 0;
        }

        .closed-group-tab-item .tab-title {
            font-size: 12px;
            color: #333;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
        }

        .no-sessions {
            text-align: center;
            color: var(--theme-secondary-text, #666);
            font-size: 14px;
            padding: 30px;
        }

        .loading {
            text-align: center;
            color: #666;
            font-size: 14px;
            padding: 30px;
        }

        /* 무한 스크롤 로딩 인디케이터 */
        .loading-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            background: var(--theme-card-background, rgba(255, 255, 255, 0.05));
            border: 1px solid var(--theme-border, rgba(255, 255, 255, 0.1));
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--theme-border, rgba(255, 255, 255, 0.3));
            border-top: 2px solid var(--theme-text, #e8eaed);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        .loading-text {
            color: var(--theme-secondary-text, rgba(232, 234, 237, 0.7));
            font-size: 14px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 다크모드에서 로딩 인디케이터 */
        @media (prefers-color-scheme: dark) {
            .loading-indicator {
                background: rgba(60, 64, 67, 0.8);
                border: 1px solid rgba(232, 234, 237, 0.2);
            }

            .loading-spinner {
                border: 2px solid rgba(232, 234, 237, 0.3);
                border-top: 2px solid #e8eaed;
            }

            .loading-text {
                color: rgba(232, 234, 237, 0.7);
            }
        }

        .restore-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .restore-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .restore-btn.primary {
            background: #007bff;
            color: white;
        }

        .restore-btn.primary:hover {
            background: #0056b3;
        }

        .restore-btn.secondary {
            background: #6c757d;
            color: white;
        }

        .restore-btn.secondary:hover {
            background: #5a6268;
        }

        .shortcuts {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            font-size: 12px;
            color: #666;
            backdrop-filter: blur(10px);
        }

        .shortcuts h4 {
            margin-bottom: 8px;
            color: #333;
        }

        .shortcuts div {
            margin-bottom: 4px;
        }

        .kbd {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }

        /* Color classes for groups */
        .group-color-grey { background-color: #5F6368; }
        .group-color-blue { background-color: #1A73E8; }
        .group-color-red { background-color: #D93025; }
        .group-color-yellow { background-color: #F9AB00; }
        .group-color-green { background-color: #137333; }
        .group-color-pink { background-color: #D01884; }
        .group-color-purple { background-color: #9334E6; }
        .group-color-cyan { background-color: #0891B2; }
        .group-color-orange { background-color: #FA7B17; }

        /* Google Apps 드롭다운 섹션 스타일 */
        .google-apps-section {
            margin-bottom: 20px;
        }

        .google-apps-section-divider {
            border-top: 1px solid var(--theme-border, #5f6368);
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .search-section {
                margin: 40px 0 30px 0;
            }

            .search-container {
                padding: 0 20px;
            }

            .shortcuts-container {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 15px;
                padding: 0 20px;
            }

            .shortcut-item {
                padding: 15px;
            }

            .shortcut-icon {
                width: 40px;
                height: 40px;
            }

            .content {
                grid-template-columns: 1fr;
            }

            .tabs-groups-container {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 20px 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Google 상단 메뉴 -->
    <div class="google-header">
        <div class="google-header-right">
            <a href="https://mail.google.com" class="header-link">Gmail</a>
            <a href="https://images.google.com" class="header-link">Images</a>
            <button class="header-icon-btn" title="Search Labs">
                <img class="flask-icon-dark" src="icons/google/flask.png" alt="Search Labs" width="20" height="20" style="opacity: 0.9;">
                <img class="flask-icon-light" src="icons/google/flask-dark.png" alt="Search Labs" width="20" height="20" style="opacity: 0.9;">
            </button>
            <div class="google-apps-container">
                <button class="header-icon-btn google-apps-btn" title="Google 앱">
                    <!-- 다크모드용 SVG (기본) -->
                    <svg class="google-apps-icon-dark" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="5" cy="5" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                        <circle cx="12" cy="5" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                        <circle cx="19" cy="5" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                        <circle cx="5" cy="12" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                        <circle cx="12" cy="12" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                        <circle cx="19" cy="12" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                        <circle cx="5" cy="19" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                        <circle cx="12" cy="19" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                        <circle cx="19" cy="19" r="1.5" fill="rgba(255, 255, 255, 0.9)"/>
                    </svg>
                    <!-- 라이트모드용 SVG -->
                    <svg class="google-apps-icon-light" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="5" cy="5" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                        <circle cx="12" cy="5" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                        <circle cx="19" cy="5" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                        <circle cx="5" cy="12" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                        <circle cx="12" cy="12" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                        <circle cx="19" cy="12" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                        <circle cx="5" cy="19" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                        <circle cx="12" cy="19" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                        <circle cx="19" cy="19" r="1.5" fill="rgba(60, 64, 67, 0.9)"/>
                    </svg>
                </button>
                <div class="google-apps-dropdown" id="googleAppsDropdown">
                    <!-- 윗 섹션: 주요 Google 앱들 -->
                    <div class="google-apps-section">
                        <div class="google-apps-grid">
                            <!-- 첫 번째 행: Gmail, Saved, Search -->
                            <a href="https://mail.google.com" class="google-app-item" target="_blank">
                                <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico" alt="Gmail">
                                <span>Gmail</span>
                            </a>
                            <a href="https://gemini.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-gemini.png" alt="Gemini">
                                <span>Gemini</span>
                            </a>
                            <a href="https://www.google.com/search" class="google-app-item" target="_blank">
                                <img src="https://www.google.com/favicon.ico" alt="Search">
                                <span>Search</span>
                            </a>

                            <!-- 두 번째 행: Maps, YouTube, Play -->
                            <a href="https://maps.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/Google_Maps.png" alt="Maps">
                                <span>Maps</span>
                            </a>
                            <a href="https://www.youtube.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-youtube.png" alt="YouTube">
                                <span>YouTube</span>
                            </a>
                            <a href="https://play.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-play.png" alt="Play">
                                <span>Play</span>
                            </a>

                            <!-- 세 번째 행: Drive, Calendar -->
                            <a href="https://drive.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-drive.png" alt="Drive">
                                <span>Drive</span>
                            </a>
                            <a href="https://calendar.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-calendar.png" alt="Calendar">
                                <span>Calendar</span>
                            </a>

                            <!-- 네 번째 행: Translate, Photos, Shopping -->
                            <a href="https://translate.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-translate.png" alt="Translate">
                                <span>Translate</span>
                            </a>
                            <a href="https://photos.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-photo.png" alt="Photos">
                                <span>Photos</span>
                            </a>
                            <a href="https://shopping.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-shopping.png" alt="Shopping">
                                <span>Shopping</span>
                            </a>

                            <!-- 다섯 번째 행: Meet, News, Chat -->
                            <a href="https://meet.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-meet.png" alt="Meet">
                                <span>Meet</span>
                            </a>
                            <a href="https://news.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-news.png" alt="News">
                                <span>News</span>
                            </a>
                            <a href="https://chat.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-chat.png" alt="Chat">
                                <span>Chat</span>
                            </a>
                        </div>
                    </div>

                    <!-- 섹션 구분선 -->
                    <div class="google-apps-section-divider"></div>

                    <!-- 아래 섹션: 나머지 Google 앱들 -->
                    <div class="google-apps-section">
                        <div class="google-apps-grid">
                            <!-- Docs, Books, Blogger -->
                            <a href="https://docs.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-docs.png" alt="Docs">
                                <span>Docs</span>
                            </a>
                            <a href="https://books.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-books.png" alt="Books">
                                <span>Books</span>
                            </a>
                            <a href="https://blogger.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-blogger.png" alt="Blogger">
                                <span>Blogger</span>
                            </a>

                            <!-- Keep, Classroom, Earth -->
                            <a href="https://keep.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-keep.png" alt="Keep">
                                <span>Keep</span>
                            </a>
                            <a href="https://classroom.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-classroom.png" alt="Classroom">
                                <span>Classroom</span>
                            </a>
                            <a href="https://earth.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-earth.png" alt="Earth">
                                <span>Earth</span>
                            </a>

                            <!-- Sheets, Slides, Search Console -->
                            <a href="https://sheets.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-sheets.png" alt="Sheets">
                                <span>Sheets</span>
                            </a>
                            <a href="https://slides.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-slides.png" alt="Slides">
                                <span>Slides</span>
                            </a>

                            <!-- Saved, Arts & Culture, Google Ads -->
                            <a href="https://saved.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-save.png" alt="Saved">
                                <span>Saved</span>
                            </a>
                            <a href="https://artsandculture.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-arts-and-culture.png" alt="Arts & Culture">
                                <span>Arts & Culture</span>
                            </a>
                            <a href="https://ads.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-ads.png" alt="Google Ads">
                                <span>Google Ads</span>
                            </a>

                            <!-- Google One, 여행, Forms -->
                            <a href="https://one.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-one.png" alt="Google One">
                                <span>Google One</span>
                            </a>
                            <a href="https://travel.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-travel.png" alt="Travel">
                                <span>Travel</span>
                            </a>
                            <a href="https://forms.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-form.png" alt="Forms">
                                <span>Forms</span>
                            </a>

                            <!-- Finance, Store, My Ad Center -->
                            <a href="https://finance.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-finance.png" alt="Finance">
                                <span>Finance</span>
                            </a>
                            <a href="https://store.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-store.png" alt="Store">
                                <span>Store</span>
                            </a>
                            <a href="https://myadcenter.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-my-ad-center.png" alt="My Ad Center">
                                <span>My Ad Center</span>
                            </a>

                            <!-- Merchant Center, Chrome Web Store, Password Manager -->
                            <a href="https://merchants.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-merchant-center.png" alt="Merchant Center">
                                <span>Merchant Center</span>
                            </a>
                            <a href="https://chromewebstore.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-chrome-web-store.png" alt="Chrome Web Store">
                                <span>Chrome Web Store</span>
                            </a>
                            <a href="https://passwords.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-password-manager.png" alt="Password Manager">
                                <span>Password Manager</span>
                            </a>

                            <!-- Google Analytics, YouTube Music, Wallet App -->
                            <a href="https://analytics.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-analytics.png" alt="Google Analytics">
                                <span>Google Analytics</span>
                            </a>
                            <a href="https://music.youtube.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-youtube-music.png" alt="YouTube Music">
                                <span>YouTube Music</span>
                            </a>
                            <a href="https://wallet.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-wallet.png" alt="Wallet App">
                                <span>Wallet App</span>
                            </a>

                            <!-- NotebookLM -->
                            <a href="https://notebooklm.google.com" class="google-app-item" target="_blank">
                                <img src="icons/google/google-notebooklm.png" alt="NotebookLM">
                                <span>NotebookLM</span>
                            </a>
                        </div>
                    </div>

                    <div class="google-apps-footer">
                        <a href="https://about.google/products/" class="more-google-apps" target="_blank">More from Google</a>
                    </div>
                </div>
            </div>
            <button class="header-profile-btn" title="Google 계정">
                <div class="profile-avatar">U</div>
            </button>
        </div>
    </div>

    <!-- 검색창 섹션 -->
    <div class="search-section">
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search or type a URL • Ctrl+Enter for new tab" id="searchInput" autocomplete="off" spellcheck="false">
            <div class="search-history-dropdown" id="searchHistoryDropdown">
                <div class="search-history-empty">No search history</div>
            </div>
        </div>
    </div>

    <!-- 바로가기 사이트 섹션 -->
    <div class="shortcuts-section">
        <div class="shortcuts-container" id="shortcutsContainer">
            <div style="text-align: center; color: rgba(255, 255, 255, 0.7); grid-column: 1 / -1;">Loading shortcuts...</div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>SessionVault</h1>
            <p>Restore your recently closed sessions and tabs</p>
        </div>

        <div class="content">
            <div class="section">
                <div class="section-header">
                    <h2>🔄 Recently Closed Sessions</h2>
                    <button class="clear-all-btn" data-type="closed">Clear All</button>
                </div>
                <div id="closedSessions" class="session-list">
                    <div class="loading">Loading closed sessions...</div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2>📁 Auto-Saved Sessions</h2>
                    <button class="clear-all-btn" data-type="auto">Clear All</button>
                </div>
                <div id="autoSavedSessions" class="session-list">
                    <div class="loading">Loading auto-saved sessions...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="newtab.js"></script>
</body>
</html>
